@tailwind base;
@tailwind components;
@tailwind utilities;

/* Performance optimizations */
* {
  box-sizing: border-box;
}

/* Optimize animations and transitions */
.animated-hue-overlay {
  will-change: background-color;
}

/* Optimize animations and transitions */
.animated-hue-overlay {
  will-change: background-color;
}

/* Optimize profile image container */
.profile-image-container {
  will-change: transform;
  backface-visibility: hidden;
  transform: translateZ(0);
}

@layer base {
  :root {
    --background: 0 0% 95%; /* softened to 95% for very gentle off-white */
    --foreground: 0 0% 8%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 8%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 8%;
    --primary: 0 0% 8%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 8%;
    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;
    --accent: 0 0% 96%;
    --accent-foreground: 0 0% 8%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 90%;
    --input: 0 0% 96%;
    --ring: 0 0% 20%;
    --radius: 0.5rem;
    --soft-white: 0 0% 100%;
    --soft-white-hover: 0 0% 95%;
  }

  .dark {
    --background: 0 0% 40%; /* much lighter - not harsh dark */
    --foreground: 0 0% 98%;
    --card: 0 0% 12%; /* slightly lighter card background */
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 12%; /* slightly lighter popover background */
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 2%;
    --secondary: 0 0% 22%; /* slightly lighter secondary for better contrast */
    --secondary-foreground: 0 0% 98%; /* maximum contrast */
    --muted: 0 0% 22%; /* slightly lighter muted for better contrast */
    --muted-foreground: 0 0% 98%; /* maximum contrast for descriptions */
    --accent: 0 0% 22%; /* slightly lighter accent for better contrast */
    --accent-foreground: 0 0% 98%; /* maximum contrast */
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 27%; /* slightly lighter border */
    --input: 0 0% 22%; /* slightly lighter input */
    --ring: 0 0% 85%;
    --soft-white: 0 0% 90%;
    --soft-white-hover: 0 0% 85%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground antialiased;
    font-family: 'Inter', ui-sans-serif, system-ui, sans-serif;
    font-size: 18px;
    transition:
      background-color 0.2s ease-out,
      color 0.2s ease-out;
    background-color: hsl(var(--background) / 0.9);
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
  }
  html {
    transition: background-color 0.2s ease-out;
    overflow-x: hidden;
  }
  button {
    transition:
      background-color 0.15s ease-out,
      color 0.15s ease-out,
      border-color 0.15s ease-out;
  }
}

@layer components {
  .text-gradient {
    background: linear-gradient(
      135deg,
      hsl(var(--foreground)) 0%,
      hsl(var(--muted-foreground)) 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .theme-transition {
    transition:
      background-color 0.2s ease-out,
      color 0.2s ease-out,
      border-color 0.2s ease-out,
      box-shadow 0.2s ease-out;
  }

  .theme-transition-fast {
    transition:
      background-color 0.1s ease-out,
      color 0.1s ease-out,
      border-color 0.1s ease-out,
      box-shadow 0.1s ease-out;
  }

  .letter-wave-animation {
    animation: letterWave 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  }

  @keyframes letterWave {
    0% {
      transform: translateY(0px);
      opacity: 1;
    }
    15% {
      transform: translateY(-2px);
      opacity: 0.9;
    }
    30% {
      transform: translateY(-8px);
      opacity: 0.3;
    }
    45% {
      transform: translateY(-12px);
      opacity: 0;
    }
    60% {
      transform: translateY(-8px);
      opacity: 0.3;
    }
    75% {
      transform: translateY(-2px);
      opacity: 0.9;
    }
    100% {
      transform: translateY(0px);
      opacity: 1;
    }
  }

  .underline-fade-out {
    position: relative;
  }

  .underline-fade-out::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 1px;
    background-color: currentColor;
    transition: opacity 0.3s ease;
  }

  .underline-fade-out:hover::after {
    opacity: 0;
  }

  /* LinkRoll Component Styles */
  .LinkRoll {
    position: relative;
    display: inline-block;
    text-decoration: none;
    color: inherit;
    transition: color 0.3s ease;
  }

  /* Fix underline positioning to be right under the text */
  .LinkRoll::after {
    content: '';
    position: absolute;
    bottom: 8px;
    left: 0;
    width: 100%;
    height: 1px;
    background-color: currentColor;
    opacity: 0;
    transition: opacity 0.2s ease;
  }

  .LinkRoll.has-underline::after {
    opacity: 1;
  }

  /* Remove underlines on mobile for cleaner look */
  @media (max-width: 768px) {
    .LinkRoll.has-underline::after {
      opacity: 0;
    }
  }

  .LinkRoll:hover {
    /* Empty hover rule as shown in the images */
  }

  /* Design tokens */
  .LinkRoll {
    --dur: 400ms;
    --ease: cubic-bezier(0.22, 1, 0.36, 1);
    --stagger: 25ms;         /* per character */
    --skew: 8deg;            /* subtle flair */
  }

  /* Base layout */
  .LinkRoll-text { line-height: 1 }
  .LinkRoll-char { /* per-character box */
    /* inline-block set in TSX */
  }

  /* Two stacked glyphs inside each char box */
  .LinkRoll-glyph {
    will-change: transform, opacity;
    transition: transform var(--dur) var(--ease), opacity var(--dur) var(--ease);
    transform: translateZ(0) /* compositor hint */
  }

  .LinkRoll-glyph-original {
    transform: translateY(0) skewX(0);
    opacity: 1;
  }

  .LinkRoll-glyph-new {
    top: 100%;               /* sits just below the box */
    transform: translateY(0) skewX(0);
    opacity: 0;
  }

  /* Hover / focus-visible state (no gaps) */
  .LinkRoll:hover .LinkRoll-char .LinkRoll-glyph-original,
  .LinkRoll:focus-visible .LinkRoll-char .LinkRoll-glyph-original {
    transform: translateY(-110%) skewX(calc(var(--skew) * -1));
    opacity: 0;
    transition-delay: calc(var(--idx) * var(--stagger));
  }

  .LinkRoll:hover .LinkRoll-char .LinkRoll-glyph-new,
  .LinkRoll:focus-visible .LinkRoll-char .LinkRoll-glyph-new {
    transform: translateY(-100%) skewX(0);
    opacity: 1;
    transition-delay: calc(var(--idx) * var(--stagger) + 10ms); /* tiny overlap, removes "gap" */
  }

  /* Reverse animation when hover ends - smooth return to original positions */
  .LinkRoll .LinkRoll-char .LinkRoll-glyph-original {
    transform: translateY(0) skewX(0);
    opacity: 1;
    transition-delay: calc((7 - var(--idx)) * var(--stagger) + 50ms); /* reverse stagger - right to left */
  }

  .LinkRoll .LinkRoll-char .LinkRoll-glyph-new {
    transform: translateY(100%) skewX(0);
    opacity: 0;
    transition-delay: calc((7 - var(--idx)) * var(--stagger) + 60ms); /* reverse stagger - right to left */
  }

  /* Accessibility: respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .LinkRoll-glyph,
    .LinkRoll:hover .LinkRoll-glyph,
    .LinkRoll:focus-visible .LinkRoll-glyph {
      transition: none;
      transform: none;
      opacity: 1;
    }
  }

  /* LoadingScreen mask classes for progressive reveal */
  .mask-top {
    -webkit-mask-image: linear-gradient(to bottom, #000 50%, transparent 50%);
    mask-image: linear-gradient(to bottom, #000 50%, transparent 50%);
    will-change: transform, opacity;
  }

  .mask-bottom {
    -webkit-mask-image: linear-gradient(to top, #000 50%, transparent 50%);
    mask-image: linear-gradient(to top, #000 50%, transparent 50%);
    will-change: transform, opacity;
  }

  /* Intersection halves (no missing semicolons, no banding) */
  .reveal-half-top { 
    clip-path: inset(0 0 50% 0); 
  }
  
  .reveal-half-bottom { 
    clip-path: inset(50% 0 0 0); 
  }

  /* Helper to center absolutely along X with natural line at 50% Y */
  .abs-center-x {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
  }

  /* Safari subpixel crispness */
  @supports (-webkit-touch-callout: none) {
    .reveal-half-top,
    .reveal-half-bottom { 
      -webkit-backface-visibility: hidden; 
    }
  }

  /* Optional: visual baseline while debugging */
  .debug-stage::after {
    content: '';
    position: absolute;
    left: 0; right: 0; top: 50%;
    height: 1px; background: rgba(255,255,255,.25)
  }

  /* Optional: debug helpers you can toggle on/off */
  .LinkRoll-debug .LinkRoll-char { outline: 1px dashed rgba(255,0,0,.35); }
  .LinkRoll-debug .LinkRoll-char .LinkRoll-glyph-original { background: rgba(0,255,0,.06); }
  .LinkRoll-debug .LinkRoll-char .LinkRoll-glyph-new { background: rgba(0,0,255,.06); }

  /* Header name animation (same style as LinkRoll but no underline) */
  .header-name-text { 
    line-height: 1;
    --dur: 400ms;
    --ease: cubic-bezier(0.22, 1, 0.36, 1);
    --stagger: 25ms;         /* per character */
    --skew: 8deg;            /* subtle flair */
  }
  .header-name-char { /* per-character box */
    /* inline-block set in TSX */
  }

  /* Two stacked glyphs inside each char box */
  .header-name-glyph {
    will-change: transform, opacity;
    transition: transform var(--dur) var(--ease), opacity var(--dur) var(--ease);
    transform: translateZ(0) /* compositor hint */
  }

  .header-name-glyph-original {
    transform: translateY(0) skewX(0);
    opacity: 1;
  }

  .header-name-glyph-new {
    top: 100%;               /* sits just below the box */
    transform: translateY(0) skewX(0);
    opacity: 0;
  }

  /* Hover state for header name */
  .header-name-text:hover .header-name-char .header-name-glyph-original {
    transform: translateY(-110%) skewX(calc(var(--skew) * -1));
    opacity: 0;
    transition-delay: calc(var(--idx) * var(--stagger));
  }

  .header-name-text:hover .header-name-char .header-name-glyph-new {
    transform: translateY(-100%) skewX(0);
    opacity: 1;
    transition-delay: calc(var(--idx) * var(--stagger) + 10ms); /* tiny overlap, removes "gap" */
  }

  /* Reverse animation when hover ends - smooth return to original positions */
  .header-name-text .header-name-char .header-name-glyph-original {
    transform: translateY(0) skewX(0);
    opacity: 1;
    transition-delay: calc((12 - var(--idx)) * var(--stagger) + 50ms); /* reverse stagger - right to left */
  }

  .header-name-text .header-name-char .header-name-glyph-new {
    transform: translateY(100%) skewX(0);
    opacity: 0;
    transition-delay: calc((12 - var(--idx)) * var(--stagger) + 50ms); /* reverse stagger - right to left */
  }



  /* Minimal dark theme enhancements */
  .dark .enhanced-glow {
    box-shadow: 0 0 20px rgba(151, 179, 174, 0.1);
  }
  .dark .subtle-border-glow {
    border-color: rgba(151, 179, 174, 0.2);
  }
  .dark .text-glow {
    text-shadow: 0 0 10px rgba(151, 179, 174, 0.3);
  }

  /* Enhanced card styling for dark mode */
  .dark .card-enhanced {
    background: linear-gradient(
      135deg,
      hsl(0 0% 12% / 0.9) 0%,
      hsl(0 0% 17% / 0.8) 100%
    );
    backdrop-filter: blur(20px);
    border: 1px solid rgba(151, 179, 174, 0.2);
  }

  /* Remove redundant dark mode transitions */
  .dark * {
    /* Remove universal dark mode transitions */
  }

  /* Enhanced focus states for dark mode */
  .dark .focus-enhanced:focus {
    outline: 2px solid rgba(151, 179, 174, 0.5);
    outline-offset: 2px;
    box-shadow:
      0 0 0 4px rgba(151, 179, 174, 0.1),
      0 0 20px rgba(151, 179, 174, 0.2);
  }

  /* Sophisticated background patterns for dark mode */
  .dark .bg-pattern {
    background-image:
      radial-gradient(
        circle at 25% 25%,
        rgba(151, 179, 174, 0.03) 0%,
        transparent 50%
      ),
      radial-gradient(
        circle at 75% 75%,
        rgba(210, 224, 211, 0.03) 0%,
        transparent 50%
      );
  }

  /* Enhanced hover effects for dark mode */
  .dark .hover-enhanced:hover {
    transform: translateY(-2px);
    box-shadow:
      0 10px 25px rgba(0, 0, 0, 0.3),
      0 0 20px rgba(151, 179, 174, 0.1);
  }

  /* Subtle text enhancement for dark mode */
  .dark .text-enhanced {
    background: linear-gradient(
      135deg,
      hsl(0 0% 98%) 0%,
      hsl(0 0% 95%) 50%,
      hsl(0 0% 98%) 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }








}

/* App content sits above the overlay */
#app {
  position: relative;
  z-index: 1;
}

/* The overlay itself */
#hue-overlay {
  position: fixed;
  inset: -15vmax;              /* oversize to avoid blur crop & edge seams */
  z-index: 0;                  /* behind content, above page background */
  pointer-events: none;
  isolation: isolate;          /* keeps blending local if you add it later */
  contain: paint;              /* hint: avoid accidental repaints outside */
}

/* Theme-tunable opacities via CSS variables */
:root {
  --hue-overlay-opacity: 0.18; /* light default (18%) */
  --hue-blur: 60px;
  --hue-sat: 1.1;
}

@media (prefers-color-scheme: dark) {
  :root {
    --hue-overlay-opacity: 0.09; /* darker by default (9%) */
  }
}

/* The actual color layers (oversized, GPU-friendly) */
.hue-layer {
  position: absolute;
  inset: 0;
  opacity: var(--hue-overlay-opacity);
  filter: blur(var(--hue-blur)) saturate(var(--hue-sat));
  will-change: transform;
  transform: translate3d(0,0,0) scale(1.08); /* already larger than view */
  background-repeat: no-repeat;
  background-size: 120% 120%;
  backface-visibility: hidden;
}

/* Palette #1 (warm pastels) */
.hue-a {
  background-image:
    radial-gradient(60vmax 60vmax at 20% 25%, #F0E2C3 0%, transparent 60%),
    radial-gradient(70vmax 70vmax at 80% 30%, #DCECE9 0%, transparent 60%),
    radial-gradient(65vmax 65vmax at 40% 80%, #F2EAE0 0%, transparent 60%);
  animation: hueDriftA 36s ease-in-out infinite alternate;
}

/* Palette #2 (cool pastels) */
.hue-b {
  background-image:
    radial-gradient(60vmax 60vmax at 15% 70%, #F6C7B3 0%, transparent 60%),
    radial-gradient(65vmax 65vmax at 85% 75%, #C3DEDD 0%, transparent 60%),
    radial-gradient(60vmax 60vmax at 50% 35%, #82B2C0 0%, transparent 60%);
  animation: hueDriftB 48s ease-in-out infinite alternate;
}

@keyframes hueDriftA {
  0%   { transform: translate3d(-3vmax, -2vmax, 0) scale(1.10) }
  100% { transform: translate3d( 3vmax,  2vmax, 0) scale(1.14) }
}

@keyframes hueDriftB {
  0%   { transform: translate3d( 2vmax, -3vmax, 0) scale(1.12) }
  100% { transform: translate3d(-2vmax,  3vmax, 0) scale(1.16) }
}

/* Optional: Stronger "pop" in light mode only */
@media (prefers-color-scheme: light) {
  :root { --hue-sat: 1.2 }
}

/* Quick debug toggle (make it obviously visible) */
body.hue-debug .hue-layer { opacity: 0.5 !important; filter: blur(20px) saturate(1.0) }
body.hue-border #hue-overlay { outline: 1px dashed magenta }
